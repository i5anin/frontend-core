## Безопасность

Безопасность фронтенд-приложений — это комплекс мер, направленных на защиту данных пользователя, инфраструктуры и бизнес-логики от несанкционированного доступа, подмены и утечки информации. Современные подходы опираются на принципы минимизации прав, изоляции данных и постоянного аудита.

### Основные угрозы

* **XSS (Cross-Site Scripting)** — внедрение вредоносного кода через пользовательский ввод. Защита: экранирование данных, использование `Content Security Policy (CSP)`, избегание `innerHTML`.
* **CSRF (Cross-Site Request Forgery)** — выполнение несанкционированных действий от имени пользователя. Защита: CSRF-токены, `SameSite` cookie, проверка заголовков `Origin` и `Referer`.
* **Clickjacking** — маскировка элементов интерфейса под внешние ресурсы. Защита: заголовки `X-Frame-Options: DENY` и `Content-Security-Policy: frame-ancestors`.
* **CORS (Cross-Origin Resource Sharing)** — ошибка конфигурации, позволяющая утечку данных между доменами. Защита: точное определение доменов в `Access-Control-Allow-Origin`.
* **Injection (SQL/Command/HTML)** — внедрение вредоносных данных в запросы. Защита: валидация, фильтрация и параметризация всех входных данных.
* **Man-in-the-Middle (MITM)** — перехват трафика между клиентом и сервером. Защита: HTTPS, HSTS, сертификаты TLS 1.3.

### Аутентификация и авторизация

* **JWT (JSON Web Token)** — токены доступа с подписью, хранящиеся в `httpOnly` cookie.
* **OAuth 2.1 / OpenID Connect** — безопасные механизмы делегированной авторизации.
* **SSO (Single Sign-On)** — единая авторизация между сервисами.
* **RBAC (Role-Based Access Control)** — разграничение доступа по ролям.
* **MFA (Multi-Factor Authentication)** — добавление второго фактора (например, одноразового кода или биометрии).

### Безопасность на клиенте

* Использование `Subresource Integrity (SRI)` при подключении внешних скриптов.
* Ограничение доступа к `localStorage` и `sessionStorage`, использование `httpOnly` cookies.
* Защита API-ключей и секретов (переменные окружения, proxy на сервере).
* Шифрование конфиденциальных данных перед хранением или отправкой.
* Контроль над источниками загрузки ресурсов (`script-src`, `img-src` в CSP).
* Проверка входных данных через библиотеку `DOMPurify` или аналоги.

### Безопасность на сервере

* Обязательное использование HTTPS с сертификатами TLS 1.3.
* Правильная настройка заголовков безопасности:

    * `Strict-Transport-Security`
    * `Content-Security-Policy`
    * `X-Content-Type-Options: nosniff`
    * `Referrer-Policy: no-referrer`
    * `Permissions-Policy` для ограничения доступа к API браузера
* Ограничение размера запросов и скорости (`rate limiting`).
* Использование WAF (Web Application Firewall) для фильтрации трафика.

### DevSecOps и аудит

* **SAST (Static Application Security Testing)** — анализ кода на уязвимости до сборки.
* **DAST (Dynamic Application Security Testing)** — тестирование работающего приложения.
* **Dependency Audit** — проверка зависимостей (`npm audit`, `Snyk`, `OWASP Dependency-Check`).
* **Secret Scanning** — автоматическое обнаружение ключей и токенов в репозитории.
* **Security Headers & CSP Reports** — сбор отчетов о нарушениях политики безопасности.
* Регулярные **Pen-тесты** и обновления зависимостей.

### Принципы безопасной разработки

* Минимизация прав доступа и видимости данных.
* Явное управление сессией (время жизни, ревокация).
* Fail-safe defaults — система должна оставаться безопасной при сбое.
* Изоляция доверенных и недоверенных контекстов.
* Использование безопасных библиотек и фреймворков, прошедших аудит OWASP.
* Логирование и мониторинг всех аутентификационных событий.

### Современные практики

* **Zero Trust Architecture** — отсутствие доверия по умолчанию, проверка каждого запроса.
* **CSP Level 3** — расширенные директивы для защиты динамического контента.
* **Secure Contexts API** — доступ к мощным API (Geolocation, Clipboard) только по HTTPS.
* **Trusted Types** — защита от XSS через строгую типизацию источников данных.
* **WebAuthn / Passkeys** — безпарольная аутентификация.
* **Security.txt** — стандартизированный файл с контактами для отчетов об уязвимостях.
