Браузер состоит из набора подсистем, каждая из которых отвечает за отдельный этап отображения страницы. Понимание этих блоков важно для оценки производительности, загрузки, рендеринга и работы JS.

**Networking (сетевой стек)**  
Обеспечивает загрузку HTML, CSS, JS, изображений, шрифтов.  
Управляет TCP/UDP, HTTP/HTTP2/HTTP3, кешированием, CORS, cookies.

**HTML Parser**  
Читает HTML-поток и строит DOM.  
Останавливается, если встречает `<script>` без `defer` или `async` — такой скрипт должен выполниться сразу.

**CSS Parser**  
Обрабатывает стили и формирует CSSOM.  
До завершения CSSOM страница не может быть отрендерена.

**JavaScript Engine**  
Выполняет код JS.  
Состоит из:

- парсеров,
    
- интерпретатора,
    
- JIT-компилятора,
    
- сборщика мусора.
    

В браузерах это V8, SpiderMonkey, JavaScriptCore.

**Layout Engine (Rendering Engine)**  
Формирует Render Tree на основе DOM + CSSOM.  
Рассчитывает размеры, позиции, правила раскладки (flex, grid, block layout).  
Отвечает за layout / reflow.

**Painting (Rasterizer)**  
Рисует визуальные элементы: фон, текст, бордеры, тени, картинки.  
Подготавливает слои для GPU.

**Compositor (GPU compositor)**  
Комбинирует слои, выполняет анимации transform/opacity на GPU.  
Отвечает за smooth scroll, плавность интерфейса.

**UI Layer**  
Хром оболочки браузера: вкладки, адресная строка, меню. Не относится к рендерингу страницы.

**Storage / Permissions**  
LocalStorage, SessionStorage, IndexedDB, cookies, Cache Storage.  
Управляет разрешениями: геолокация, камера, уведомления.

**Scheduler / Event Loop**  
Обрабатывает очереди задач:  
macrotask (setTimeout, I/O) и microtask (Promise.then, MutationObserver).  
Контролирует очередность выполнения.

Браузер — это сложная система, где каждый блок выполняет строго свою роль. Оптимизация загрузки, рендеринга и JS-сценариев зависит от понимания этих внутренних подсистем.